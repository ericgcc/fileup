!function(e){var i={url:window.location.pathname+window.location.search,inputID:"",queueID:"",dropzoneID:"",files:[],fieldName:"filedata",extraFields:{},lang:"en",sizeLimit:0,filesLimit:0,method:"post",timeout:null,autostart:!1,csrfToken:"",templateFile:'<div id="fileup-[INPUT_ID]-[FILE_NUM]" class="fileup-file [TYPE]"><div class="fileup-preview"><img src="[PREVIEW_SRC]" alt="[NAME]"/></div><div class="fileup-container"><div class="fileup-description"><span class="fileup-name">[NAME]</span> (<span class="fileup-size">[SIZE_HUMAN]</span>)</div><div class="fileup-controls"><span class="fileup-remove" onclick="$.fileup(\'[INPUT_ID]\', \'remove\', \'[FILE_NUM]\');" title="[REMOVE]"></span><span class="fileup-upload" onclick="$.fileup(\'[INPUT_ID]\', \'upload\', \'[FILE_NUM]\');">[UPLOAD]</span><span class="fileup-abort" onclick="$.fileup(\'[INPUT_ID]\', \'abort\', \'[FILE_NUM]\');" style="display:none">[ABORT]</span></div><div class="fileup-result"></div><div class="fileup-progress"><div class="fileup-progress-bar"></div></div></div><div class="fileup-clear"></div></div>',onSelect:function(e){},onRemove:function(e,i,t){},onBeforeStart:function(e,i,t){},onBeforeRender:function(){},onAfterRender:function(){},onStart:function(e,i){},onStartSystem:function(i,t){var r=this.fileup.options,o=e("#fileup-"+r.inputID+"-"+i);o.find(".fileup-controls .fileup-upload").hide(),o.find(".fileup-controls .fileup-abort").show(),o.find(".fileup-result").removeClass("fileup-error").removeClass("fileup-success").text("")},onProgress:function(i,t,r){if(t.lengthComputable){var o=this.fileup.options,n=Math.ceil(t.loaded/t.total*100);e("#fileup-"+o.inputID+"-"+i+" .fileup-progress-bar").css("width",n+"%")}},onSuccess:function(e,i,t){},onError:function(e,i,t,r){},onErrorSystem:function(i,t,r){var o=this.fileup.options;switch(i){case"files_limit":var n=l[o.lang].errorFilesLimit;alert(n.replace(/%filesLimit%/g,o.filesLimit));break;case"size_limit":var a=p(o.sizeLimit);n=(n=(n=l[o.lang].errorSizeLimit).replace(/%sizeLimit%/g,a)).replace(/%fileName%/g,t.name),alert(n);break;case"file_type":n=l[o.lang].errorFileType;alert(n.replace(/%fileName%/g,t.name));break;case"bad_status":case"error_load":var s=e("#fileup-"+o.inputID+"-"+r);s.find(".fileup-controls .fileup-abort").hide(),s.find(".fileup-controls .fileup-upload").show(),s.find(".fileup-result").addClass("fileup-error").text(l[o.lang].error);break;case"old_browser":alert(l[o.lang].errorOldBrowser)}},onAbort:function(e,i){},onAbortSystem:function(i,t){var r=this.fileup.options,o=e("#fileup-"+r.inputID+"-"+i);o.find(".fileup-controls .fileup-abort").hide(),o.find(".fileup-controls .fileup-upload").show(),o.find(".fileup-result").removeClass("fileup-error").removeClass("fileup-success").text("")},onTimeout:function(e,i){},onTimeoutSystem:function(i,t){var r=this.fileup.options,o=e("#fileup-"+r.inputID+"-"+i);o.find(".fileup-controls .fileup-abort").hide(),o.find(".fileup-controls .fileup-upload").show(),o.find(".fileup-result").removeClass("fileup-error").removeClass("fileup-success").text("")},onFinish:function(e,i){},onSuccessSystem:function(i,t,r){var o=this.fileup.options,n=e("#fileup-"+o.inputID+"-"+t);n.find(".fileup-controls .fileup-abort").hide(),n.find(".fileup-controls .fileup-upload").hide(),n.find(".fileup-result").removeClass("fileup-error").addClass("fileup-success").text(l[o.lang].complete)},onDragOver:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDragLeave:function(e){},onDragEnd:function(e){},onDragEnter:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}},t=function(e,i,t){var r=e.fileup.events[i]||[];r.push(t),e.fileup.events[i]=r},r=function(e,i){e.fileup.events[i]=[]},o=function(e,i,t){var r,o=!0;if(e.fileup.events[i])for(var n=0;n<e.fileup.events[i].length;n++)"function"==typeof e.fileup.events[i][n]&&(t?(r=e.fileup.events[i][n].apply(e,t),o&&!1===r&&(o=!1)):(r=e.fileup.events[i][n].apply(e),o&&!1===r&&(o=!1)));return o},n={input:{},select:function(e){return t(n.input,"select",e),n},remove:function(e){return t(n.input,"remove",e),n},beforeStart:function(e){return t(n.input,"beforeStart",e),n},start:function(e){return t(n.input,"start",e),n},progress:function(e){return t(n.input,"progress",e),n},success:function(e){return t(n.input,"success",e),n},error:function(e){return t(n.input,"error",e),n},abort:function(e){return t(n.input,"abort",e),n},timeout:function(e){return t(n.input,"timeout",e),n},dragOver:function(e){return t(n.input,"dragOver",e),n},dragLeave:function(e){return t(n.input,"dragLeave",e),n},dragEnd:function(e){return t(n.input,"dragEnd",e),n},dragEnter:function(e){return t(n.input,"dragEnter",e),n}},l={tr:{upload:"Yükle",abort:"İptal Et",remove:"Sil",complete:"Tamamlandı",error:"Hata",errorFilesLimit:"Seçilen dosyaların sayısı sınırı aşıyor (%filesLimit%)",errorSizeLimit:'%fileName%" dosyası boyut sınırını (%sizeLimit%) aşıyor',errorFileType:'"%fileName%" dosyası hatalı',errorOldBrowser:"Tarayıcınız dosya yükleyemiyor. En son sürüme güncelleyin"},ru:{upload:"Загрузить",abort:"Остановить",remove:"Удалить",complete:"Готово",error:"Ошибка",errorFilesLimit:"Количество выбранных файлов превышает лимит (%filesLimit%)",errorSizeLimit:'Файл "%fileName%" превышает предельный размер (%sizeLimit%)',errorFileType:'Файл "%fileName%" является некорректным',errorOldBrowser:"Ваш браузер не может загружать файлы. Обновите его до последней версии"},en:{upload:"Upload",abort:"Abort",remove:"Remove",complete:"Complete",error:"Error",errorFilesLimit:"The number of selected files exceeds the limit (%filesLimit%)",errorSizeLimit:'File "%fileName%" exceeds the size limit (%sizeLimit%)',errorFileType:'File "%fileName%" is incorrect',errorOldBrowser:"Your browser can not upload files. Update to the latest version"},ptBR:{upload:"Enviar",abort:"Cancelar",remove:"Remover",complete:"Enviado",error:"Erro",errorFilesLimit:"O número de arquivos selecionados excede o limite (%filesLimit%)",errorSizeLimit:'Arquivo "%fileName%" excede o limite (%sizeLimit%)',errorFileType:'Arquivo "%fileName%" inválido',errorOldBrowser:"Seu navegador não pode enviar os arquivos. Atualize para a versão mais recente"},es:{upload:"Subir",abort:"Cancelar",remove:"Eliminar",complete:"Cargado",error:"Error",errorFilesLimit:"El número de archivo selecccionados excede el límite (%filesLimit%)",errorSizeLimit:'El archivo "%fileName%" excede el limite de tamaño (%sizeLimit%)',errorFileType:'El archivo "%fileName%" es inválido',errorOldBrowser:"Tu navegador no puede subir archivos. Actualiza a la última versión"}};function a(i){i.preventDefault(),i.stopPropagation();var t=i.target.fileup.input,r=t.fileup.options,n=i.target.files||i.dataTransfer.files;if(n.length){o(t,"beforeRender");for(var l=0;l<n.length;l++){var a=n[l];if(r.sizeLimit>0&&u(a)>r.sizeLimit)o(t,"error",["size_limit",a]);else{if(r.filesLimit>0&&Object.keys(n).length>=r.filesLimit){o(t,"error",["files_limit",a]);break}if("string"==typeof t.accept){var s=t.accept;if(s&&/[^\w]+/.test(s)){var p=!1,c=s.split(",");if(c.length>0)for(var d=0;d<c.length;d++)if(c[d]=c[d].replace(/\s/g,""),new RegExp(c[d].replace("*",".*")).test(a.type)||new RegExp(c[d].replace(".",".*/")).test(a.type)){p=!0;break}if(!p){o(t,"error",["file_type",a]);continue}}}!1!==o(t,"select",[a])&&f(a,t)}}e(t).val(""),o(t,"afterRender")}o(t,"dragEnd",[i])}function s(){if(this.files.length){var i=this.fileup.options;if(!e(this).is("[multiple]")){if(!o(this,"remove",["*","1",this.files[0]]))return void e(this).val("");e("#"+i.queueID).empty(),this.fileup.files={}}o(this,"beforeRender");for(var t=0;t<this.files.length;t++){var r=this.files[t];if(i.sizeLimit>0&&u(r)>i.sizeLimit)o(this,"error",["size_limit",r]);else{if(i.filesLimit>0&&Object.keys(this.fileup.files).length>=i.filesLimit){o(this,"error",["files_limit",r]);break}if("string"==typeof this.accept){var n=this.accept;if(n&&/[^\w]+/.test(n)){var l=!1,a=n.split(",");if(a.length>0)for(var s=0;s<a.length;s++)if(a[s]=a[s].replace(/\s/g,""),new RegExp(a[s].replace("*",".*")).test(r.type)||new RegExp(a[s].replace(".",".*/")).test(r.type)){l=!0;break}if(!l){o(this,"error",["file_type",r]);continue}}}!1!==o(this,"select",[r])&&f(r,this)}}e(this).val(""),o(this,"afterRender")}}function f(i,t){var r=t.fileup.options;if(window.XMLHttpRequest)var n="onload"in new XMLHttpRequest?new XMLHttpRequest:new XDomainRequest;else{if(!window.ActiveXObject)return o(t,"error",["old_browser",i]),!1;try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return o(t,"error",["old_browser",i]),!1}}}var a=r.templateFile;a=(a=(a=a.replace(/\[INPUT_ID\]/g,r.inputID)).replace(/\[FILE_NUM\]/g,t.fileup.nextID)).replace(/\[NAME\]/g,function(e){return e.name||e.fileName}(i)),a=(a=(a=(a=(a=(a=a.replace(/\[MTYPE\]/g,i.type)).replace(/\[SIZE\]/g,u(i))).replace(/\[SIZE_HUMAN\]/g,p(u(i)))).replace(/\[UPLOAD\]/g,l[r.lang].upload)).replace(/\[REMOVE\]/g,l[r.lang].remove)).replace(/\[ABORT\]/g,l[r.lang].abort);var s={xhr:n,file:i,file_number:t.fileup.nextID,status:"stand_by"};if(t.fileup.files[t.fileup.nextID]=s,t.fileup.nextID++,"image/gif"===i.type||"image/png"===i.type||"image/jpg"===i.type||"image/jpeg"===i.type)if("undefined"!=typeof FileReader){var f=new FileReader;f.onload=function(i){a=(a=a.replace(/\[PREVIEW_SRC\]/g,i.target.result)).replace(/\[TYPE\]/g,"fileup-image"),e("#"+r.queueID).append(a),r.autostart&&c(t,s)},f.readAsDataURL(i)}else a=(a=a.replace(/\[PREVIEW_SRC\]/g,"")).replace(/\[TYPE\]/g,"fileup-image fileup-no-preview"),e("#"+r.queueID).append(a),r.autostart&&c(t,s);else a=(a=a.replace(/\[PREVIEW_SRC\]/g,"")).replace(/\[TYPE\]/g,"fileup-doc"),e("#"+r.queueID).append(a),r.autostart&&c(t,s)}function u(e){return e.size||e.fileSize}function p(e){var i="";return e>=1073741824?i=(e/1073741824).toFixed(2)+" Gb":e>=1048576?i=(e/1048576).toFixed(2)+" Mb":e>=1024?i=(e/1024).toFixed(2)+" Kb":e>=0&&(i=e+" bytes"),i}function c(i,t){var r=i.fileup.options,n=t.file_number,l=t.file,a=t.xhr;if("number"==typeof r.timeout&&(a.timeout=r.timeout),a.onloadstart=function(){t.status="loading",o(i,"start",[n,l])},a.upload.onprogress=function(e){o(i,"progress",[n,e,l])},a.onload=function(){t.status="loaded",200===a.status?o(i,"success",[a.responseText,n,l]):o(i,"error",["bad_status",l,n,a.responseText])},a.onloadend=function(){o(i,"finish",[n,l])},a.onabort=function(){t.status="stand_by",o(i,"abort",[n,l])},a.ontimeout=function(){t.status="stand_by",o(i,"timeout",[n,l])},a.onerror=function(e){t.status="stand_by",o(i,"error",["error_load",l,n,e])},a.open(r.method,r.url,!0),a.setRequestHeader("Cache-Control","no-cache"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),o(i,"beforeStart",[a,n,l]),void 0!==window.FormData){var s=new FormData;return s.append(r.fieldName,l),r.csrfToken&&s.append("_token",r.csrfToken),Object.keys(r.extraFields).length&&e.each(r.extraFields,(function(e,i){s.append(e,i)})),a.send(s)}return a.send(l)}var d={appendFile:function(e,i){f(i,document.getElementById(e))},upload:function(i,t){var r=document.getElementById(i);r&&"file"===r.type&&"object"==typeof r.fileup&&("*"===t?e.each(r.fileup.files,(function(e,i){"stand_by"===i.status&&c(r,i)})):"object"==typeof r.fileup.files[t]&&c(r,r.fileup.files[t]))},remove:function(i,t){var r=document.getElementById(i);if(r&&"file"===r.type&&"object"==typeof r.fileup){r.fileup.options;var n=Object.keys(r.fileup.files).length;if("*"===t){if(!1===o(r,"remove",["*",n]))return;r.fileup.files={},e("[id^=fileup-"+i+"-]").fadeOut("fast",(function(){e(this).remove()}))}else if("object"==typeof r.fileup.files[t]){if(!1===o(r,"remove",[r.fileup.files[t],n,t]))return;delete r.fileup.files[t],e("#fileup-"+i+"-"+t).fadeOut("fast",(function(){e(this).remove()}))}}},removeEvents:function(e,i){var t=document.getElementById(e);t&&"file"===t.type&&"object"==typeof t.fileup&&r(t,i)},abort:function(i,t){var r=document.getElementById(i);r&&"file"===r.type&&"object"==typeof r.fileup&&("*"===t?e.each(r.fileup.files,(function(e,i){i.xhr.abort()})):"object"==typeof r.fileup.files[t]&&r.fileup.files[t].xhr.abort())}};e.fileup=function(r,f,u){if("object"==typeof r){if(function(r){var n=e.extend(!1,i,r),f=document.getElementById(n.inputID);if(f&&"file"===f.type){if(n.dropzoneID){var u=document.getElementById(n.dropzoneID);u&&(u.addEventListener("dragover",(function(e){o(f,"dragOver",[e])})),u.addEventListener("dragleave",(function(e){o(f,"dragLeave",[e])})),u.addEventListener("dragenter",(function(e){o(f,"dragEnter",[e])})),u.addEventListener("drop",a),u.fileup={input:f})}if(f.fileup={files:{},nextID:0,options:n,events:{}},t(f,"select",n.onSelect),t(f,"remove",n.onRemove),t(f,"beforeStart",n.onBeforeStart),t(f,"beforeRender",n.onBeforeRender),t(f,"afterRender",n.onAfterRender),t(f,"start",n.onStartSystem),t(f,"start",n.onStart),t(f,"progress",n.onProgress),t(f,"success",n.onSuccessSystem),t(f,"success",n.onSuccess),t(f,"error",n.onErrorSystem),t(f,"error",n.onError),t(f,"abort",n.onAbortSystem),t(f,"abort",n.onAbort),t(f,"timeout",n.onTimeoutSystem),t(f,"timeout",n.onTimeout),t(f,"dragOver",n.onDragOver),t(f,"dragLeave",n.onDragLeave),t(f,"dragEnd",n.onDragEnd),t(f,"dragEnter",n.onDragEnter),e(f).on("change",s),n.files.length>0){o(f,"beforeRender");for(var c=0;c<n.files.length;c++){var d=n.templateFile;if(d=(d=(d=(d=(d=(d=(d=d.replace(/\[INPUT_ID\]/g,n.inputID)).replace(/\[FILE_NUM\]/g,f.fileup.nextID)).replace(/\[NAME\]/g,n.files[c].name)).replace(/\[SIZE_HUMAN\]/g,p(n.files[c].size))).replace(/\[UPLOAD\]/g,l[n.lang].upload)).replace(/\[REMOVE\]/g,l[n.lang].remove)).replace(/\[ABORT\]/g,l[n.lang].abort),f.fileup.files[f.fileup.nextID]={xhr:null,file:n.files[c],file_number:f.fileup.nextID,status:"loaded"},d=n.files[c].previewUrl?(d=d.replace(/\[PREVIEW_SRC\]/g,n.files[c].previewUrl)).replace(/\[TYPE\]/g,"fileup-image"):(d=d.replace(/\[PREVIEW_SRC\]/g,"")).replace(/\[TYPE\]/g,"fileup-doc"),e("#"+n.queueID).append(d).find(".fileup-progress, .fileup-result, .fileup-upload, .fileup-abort").remove(),n.files[c].downloadUrl){var m=e("#fileup-"+n.inputID+"-"+f.fileup.nextID).find(".fileup-name");m[0]&&m.replaceWith('<a href="'+n.files[c].downloadUrl+'" class="fileup-name" download="'+n.files[c].name+'">'+n.files[c].name+"</a>")}f.fileup.nextID++}o(f,"afterRender")}}}(r),(c=document.getElementById(r.inputID))&&"file"===c.type&&"object"==typeof c.fileup)return n.input=c,n}else if("string"==typeof r&&"string"==typeof f&&"function"==typeof d[f])d[f](r,u);else if("string"==typeof r&&void 0===f&&void 0===u){var c;if((c=document.getElementById(r))&&"file"===c.type&&"object"==typeof c.fileup)return n.input=c,n}else e.error("Unknown method "+r)}}(jQuery);